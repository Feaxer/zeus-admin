events = require("events").EventEmitter
swig = require("swig")

class AdminPages 
    constructor: (@router)->
        @pages = []
        events.emit "admin-pages:init", this

    getRouter: ->
        @router

    getPages: ->
        @pages

    add: (name, route, view)->
        @pages.push 
            name: name
            route: route
            view: view
        data = events.emit "prerender-#{name}-page", this
        console.dir {data: data}
        # @router.get route, (req, res)->
        #     template = swig.renderFile(view, data)
