html = require("zeus-html")(true)
class ZeusAdminMenu
    constructor: ->
        @links = []
        @sections = []

    addSection: (title)->
        @sections.push title.toLowerCase()

    addLink: (section, title, icon, href)->
        if typeof href == "function"
            subitems = []
            href(subitems)
        @links.push 
            section: section.toLowerCase()
            title: title
            icon: if icon? then icon else "magic-wand"
            href: href if typeof href == "string"
            subitem: subitems if subitems?

    render: ->
        html.output = ''
        for section in @sections
            html.li {class: "nav-main-heading"}, (li)->
                li.span {class: "sidebar-mini-hide"}, section
            for link in @links
                if link.section == section
                    html.li {}, (li)->
                        li.a {href: if link.href then link.href else '#'}, (lia)->
                            lia.i class: "si si-"+link.icon
                            lia.span class: "sidebar-mini-hide", link.title
        html.output

module.exports = new ZeusAdminMenu()